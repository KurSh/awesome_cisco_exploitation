#!/bin/sh
# $Id: symbols_elf.SH,v 3.2.62.1 1996/03/19 03:53:31 rchiao Exp $
# $Source: /release/111/cvs/Xsys/rommon/utils/symbols_elf.SH,v $
#------------------------------------------------------------------
# symbols_elf.SH is run by {prep,update}_sys_tree to generate symbols_elf.sh
#
# June 1995, Mark D. Baushke
#
# Copyright (c) 1995-1996 by cisco Systems, Inc.
# All rights reserved.
#------------------------------------------------------------------
# $Log: symbols_elf.SH,v $
# Revision 3.2.62.1  1996/03/19  03:53:31  rchiao
# Branch: California_branch
# Added ClearCase build changes.
#
# Revision 3.2  1995/11/17  18:48:50  hampton
# Remove old entries from the RCS header logs.
#
# Revision 3.1  1995/11/09  13:10:13  shaker
# Bump version numbers from 2.x to 3.x.
#
# Revision 2.1  1995/06/07  22:42:40  hampton
# Bump version numbers from 1.x to 2.x.
#
#------------------------------------------------------------------
# $Endlog$
#

romrev="$1"
copy_name="$2"

cat > symbols_elf.sh <<@@E_O_F
#!/bin/sh
#
# symbols.sh
#
# Called with:
#	\$1	Version of 'nm' to run for this target processor
#	\$2	Name of ELF file from which to get symbol table
#	\$3	Name of output '*.symbols' file to create
#	\$4	Name of monitor image that symbols are for
#
# WARNING: This file was automatically generated by the checkout
# script when we created this copy of the Lab Trunk.
#
#  DO NOT EDIT.
#
ROMMON=""
if [ "x\$SYSROOT" = "x" ]; then
    SYSROOT=\`../../scripts/sysroot\`
    ROMMON=rommon
fi
v=\`cat \$SYSROOT/\$ROMMON/version\`
v=\`expr \$v\`
\$1 -n \$2 | pr -2 -f -l60 -w79 -h "-- \$4 Monitor Symbol Table, Version $romrev [$copy_name \$v]," | expand > \$3
@@E_O_F
chmod +x symbols_elf.sh
