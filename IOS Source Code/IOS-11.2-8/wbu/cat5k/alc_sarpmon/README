# $Id: README,v 1.1.4.1 1996/05/09 15:00:15 rbadri Exp $
# $Source: /release/112/cvs/Xwbu/cat5k/alc_sarpmon/README,v $
#------------------------------------------------------------------
# README -- installation notes for LSI Logic ATMizer PMON.
#
# 
#
# Copyright (c) 1996 by cisco Systems, Inc.
# All rights reserved.
#------------------------------------------------------------------
# $Log: README,v $
# Revision 1.1.4.1  1996/05/09  15:00:15  rbadri
# Branch: California_branch
# Synergy features to the mainline
#
# Revision 1.1.40.1  1996/04/27  06:16:12  cakyol
# non sync sync from V112_0_2 to ....
# Branch: LE_Cal_ATM_FR_California_Postsync_960425_branch
#
# Revision 1.1.28.1  1996/04/08  01:41:25  bbenson
# Branch: LE_Cal_V112_0_2_branch
# Sync of LE_Cal to new V112_0_2 sync point (post Port Ready).
#
# Revision 1.1.16.1  1996/03/22  09:12:21  rlowe
# Non-sync Synalc3_LE_Cal_V111_1_0_3_merge_branch to V111_1_3
# yielding LE_Syn_Cal_V111_1_3_branch.
# Branch: LE_Syn_Cal_V111_1_3_branch
#
# Revision 1.1.2.1  1996/03/13  02:37:56  rlowe
# Add file content from Synergy repository.
# Branch: Synalc3_LE_Cal_V111_1_0_3_merge_branch
#
# Revision 1.1  1996/03/11  07:43:52  rlowe
# Placeholders for California.
#
#
#------------------------------------------------------------------
# $Endlog$
#

			LSI Logic Prom Monitor 
			Release Notice v4.1_Beta 		Jul 15, 1994


Enhancements and Bug Fixes

	To permit different tool sets to be supported, the structure
	of the makefiles has been changed. The diagram below shows the
	make-related files for the root and pmon directories, the lib
	and floating-point emulation directories use the same scheme.

			|
	--------------------------------------------------
	|	    |		|	               |
    Makefile   stdrules.mk  defines.mk                pmon	
						       |
		--------------------------------------------------
		|	   |	      |	        |||||	    |    | 
	     Makefile  target.mk   files.mk      *.c	   bg   lg 
						    	    |    | 
						  	  ---   --- 


	The .mk files contain the following make-related information:

		stdrules.mk	- commonly used make rules
		defines.mk	- configuration info, generated by Install
		files.mk	- list of files by type
		target.mk	- used to build different targets
		rules.mk	- build rules, generated automatically


	The directories bg, and lg contain binaries compiled for
	execution in a big endian and little endian environments
	respectively, they do NOT contain makefiles, they are built
	using the file target.mk in the parent directory.

	To permit this package to be built on DOS-based systems, the
	MSDOS version of this product restricts all file and directory
	names to lower case, and 8 characters with a 3 character
	extent.  


    PMON

	The commands iflush and dflush have been replaced by the
	command 'flush' that by default flushes both caches. Options
	-i and -d permit flushing of a single cache.

	PMON now sizes memory after reset. However, memory contents
	are not changed as part of this operation.

	To support programs which require a large stack, the client
	stackpointer is now set to the top of memory, rather than to an
	area inside PMON's workspace.

	Support for input files has been added, see example/filetst.c.
	The files are placed at the top of memory, and the stackpointer
	to move down accordingly. It does not support redirecting stdin
	from a file.

	PMON now detects the presence of an floating-point coprocessor.
	If found, PMON enables the coprocesor and the floating-point
	exception input. Note that PMON will not enable the FPU if the
	CpCond1 input pin is not tied low.

	Numerous command options have been added to PMON. Use 'h *' to
	review the new command list. In particular, the load command
	now permits the baud rate to be set directly.

	The HI and LO registers have been added to the "r *" display.

	The values of KUc and IEc in the Status register are now
	displayed correctly.

	The 'g' command now has a -t option that times the execution
	of the client program. Setting the -t option causes the client
	to be invoked with argv[0] as "t", instead of the default "g".
	Unfortunately, because of a bug in earlier versions of PMON,
	this means that a program built using the 3.0 version of pmcc,
	will not run under pre-3.0 versions of PMON, unless the "-c"
	option is added to the 'g' command.

	Downloading fast-mode records with tip to tty0 has problems,
	for this download mode, select S-records.

	To exclude a command from PMON, remove the entry in cmdtable.c,
	and then exclude the module (or modules) from the link.

	For LR33020 users, the 'r' command now displays the PIXSIZ
	field of the GCPCNTRL register directly in pixels.


     NVRAM
	PMON has been extended to support NVRAM. To use this feature
	type,

		PMON> set nvram

	This will place all current settings (environment variables and
	baud rates) into the NVRAM. If desired, this feature can also be
	used to specify PMON commands that will be executed on power up.

		PMON> set nvram "r;l 80020000 2"

	In this example the command list displays the GP registers, and
	then disassembles two instructions, starting at 0x80020000.

	If you wish to skip the nvram reading process during power up,
	hold the console return key down while releasing the reset button.
	After repeating this process several times, you will eventually
	get the message 

		Skip NVRAM read? (y/n)? >

	At this point press 'y'. The booting process will then proceed
	without reading the nvram.

     ETHERNET
	The load command has been extended to provide download via
	Ethernet. This feature requires a 256K byte EPROM unless
	floating-point emulation is omitted from the PROM.

	To download via Ethernet, perform the following steps.

	Choose a host name and IP address for your board, and
	make an entry in your Unix host's /etc/hosts file.

		# grep racerx /etx/hosts
		71.0.0.208      racerx

	Use the set command to find out the hardware ethernet address
	of your board.

		PMON> set etheraddr
		 etheraddr = 08:00:69:03:00:00

	If you plan to have more than one board on the network, it can
	be changed by using the command,

		PMON> set etheraddr 00:56:12:45:78:00

	Having chosen an Ethernet hardware address, and a hostname use
	the arp command on your Unix host, to enter that information
	into the arp table.

		# arp -s racerx 08:00:69:03:00:00

	This step is necessary because PMON does not respond to arp
	requests from the network. 
	
	Inform PMON that you will be downloading over Ethernet by
	setting the environment variable 'hostport' to 'ethernet'.

		PMON> set hostport ethernet

	Now you ready to download. At this stage you might like to use
	the "set nvram" command to make these new settings permanent.

	To download a fast-mode or S-record file, use the following
	steps,

		PMON> load
		# tftp racerx
		tftp> put game.rec
		tftp> quit

	Note that you must use tftp to transmit the file from the host,
	as PMON only understands the UDP protocol. The transfer rate
	should be approximately 34K bytes/second.

	If you wish to transfer a memory image file, i.e., a binary
	transfer, use the following steps.

		PMON> load -B
		# tftp racerx
		tftp> mode binary
		tftp> put foobar 80040000
		tftp> quit

	Notice that the mode command in tftp has been used to place
	tftp in its binary transfer mode. This is necessary to stop it
	translating "\n" to "\r\n". The put command tells tftp to
	transfer the file "foobar" into the target system's memory
	starting at 0x80040000.  The transfer rate in this mode should
	be approximately 150K bytes/second.


    TOOLS

	All tools now have single-case names, for compatibility with
	MSDOS.

	Some of the tools now have man pages. For MSDOS hosts, a
	simplified version of the program 'man' is provided.

	When using MIPS tools, pmcc now generates fast-mode records by
	default, if you need S-records, use the the -srec option. There
	is also a install-time switch which allows you to generate
	S-records by default.

	A checksum has been added to the fast-mode records. To suppress
	the generation of a checksum record, invoke pmcc with the -chksum
	option. This is necessary when creating a fast-mode record file
	that is to be downloaded to a pre- 3.00 version of PMON.

	When generating fast-mode records, the bss section is no
	longer downloaded by default. To include bss in the download,
	use the -b option with genfrec.

	PMON and pmcc now support fast-mode records when using little
	endian byte ordering.

	The terminating S-record (S7) now has the correct checksum.

	The program genBrec has been deleted, to create a binary memory
	image from a coff file, use "gensrec -b".

	The programs in the tools directory will now display a brief
	explanation of their options if invoked with -h.

	Due to problems with MIPS's nm command, the -B option has been
	added to the genSrec command, which emulates the ouput of the
	"nm -B" command, except that the symbols are not in
	alphabetical order. To generate a list in alphabetical order,
	pipe the output through "sort +2".

	The pmcc command is now a executable binary that is built from
	either mips.c, bso.c, or epi.c, depending on your tools vendor.
	The pmcc command has also been extended to permit linker
	options (particularly -D ADDRESS) to be specified on the
	command line, and to generate a linker map file in a.map
	or <outfile>.map.

	The bso_cc and bso_ld commands have been deleted, all the same
	features are now provided by the pmcc command.

	The prfp command has been added, which prints floating-point
	values.

	A -l option has been added to rdsrec, use this switch when 
	disassembling little endian S-record files.

	A -f option has been added to the rdsrec command, use this
	switch to translate S-record files to fast-format records.

	A -o option has been added to the rdsrec command, use this
	option to name the output file.

	The rdfrec program now produces disassembly output. Use
	the -n option to disable this feature.


    LIB

	To avoid name conflicts with application programs using the same
	name, the label 'start' in crt1.s has been renamed '_start'.

	Numerous new functions have been added to the library.

	To reduce the size of linked binary files. More of the library
	functions are now in separate files.

	Buffering has been added to buffered I/O functions.

	The function bcopy, which had a problem when copying backwards,
	has been fixed.


KNOWN PROBLEMS AND LIMITATIONS

1. If you are using the MIPS cross tools hosted on SparcStation and you
   get a message of the form,

	as1r3000: Warning: ../commands.c, line 42: macro instruction used $at

   contact your tool vendor to obtain an updated version of the assembler.

2. The EPI tools that we tested, were unable to build a functioning
   version of PMON with little endian byte ordering. Big endian worked
   just fine, as were little endian programs that we built for
   downloading.

